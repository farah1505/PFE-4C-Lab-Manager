# 4C Lab Manager - Guide Rapide ImplÃ©mentation\n\n## âœ… Ce qui est fait\n\n### Frontend\n- âœ¨ Page login moderne avec design responsive\n- ğŸ¯ Support de 4 rÃ´les (Admin, SuperAdmin, Formateur, Apprenant)\n- ğŸ” Service d'authentification complet\n- ğŸ›¡ï¸ Guards et Interceptors HTTP\n- ğŸ“± Design mobile-first optimisÃ©\n- ğŸ¨ Variables CSS globales et styles cohÃ©rents\n- ğŸ’¾ Support \"Se souvenir de moi\" (localStorage/sessionStorage)\n- ğŸ“š Documentation complÃ¨te (AUTHENTICATION.md)\n\n## â³ Ã€ faire - Prochaines Ã©tapes\n\n### 1. Backend API (PRIORITAIRE)\n\nLe backend doit implÃ©menter ces endpoints:\n\n#### Authentication Endpoints\n- `POST /api/auth/login` - Connexion utilisateur\n- `POST /api/auth/register` - Inscription nouvel utilisateur\n- `POST /api/auth/forgot-password` - Demander rÃ©initialisation mot de passe\n- `POST /api/auth/reset-password` - RÃ©initialiser le mot de passe\n\n#### Voir [AUTHENTICATION.md](./AUTHENTICATION.md) pour les formats de requÃªte/rÃ©ponse\n\n### 2. Configurer l'URL du Backend\n\n**Fichier:** `src/app/services/auth.ts`\n\nModifier la ligne:\n```typescript\nprivate apiUrl = 'http://localhost:3000/api/auth'; // Adapter cette URL\n```\n\n### 3. CrÃ©er les Dashboard pages\n\nCrÃ©er les composants pour chaque rÃ´le:\n\n```bash\nng generate component components/dashboard/admin-dashboard\nng generate component components/dashboard/superadmin-dashboard\nng generate component components/dashboard/formateur-dashboard\nng generate component components/dashboard/apprenant-dashboard\n```\n\nMis Ã  jour `src/app/app.routes.ts` pour importer et utiliser ces composants (voir TODO comments).\n\n### 4. CrÃ©er les pages supplÃ©mentaires\n\n```bash\nng generate component components/signup\nng generate component components/forgot-password\nng generate component components/reset-password\nng generate component components/forbidden\nng generate component components/contact\n```\n\n### 5. Ajouter les Providers HTTP au main.ts\n\nAssurer que `HttpClientModule` est ajoutÃ© Ã  la configuration (dÃ©jÃ  fait dans `app.config.ts`).\n\n### 6. Support Backend requis\n\n#### SÃ©curitÃ© minimale\n- âœ… Hachage des mots de passe (bcrypt/argon2)\n- âœ… JWT tokens (HS256 ou RS256)\n- âœ… HTTPS activÃ©\n- âœ… CORS configurÃ© correctement\n- âœ… Validation des donnÃ©es cÃ´tÃ© serveur\n- âœ… Rate limiting sur /login\n\n#### FonctionnalitÃ©s\n- âœ… VÃ©rification du rÃ´le utilisateur\n- âœ… Gestion des sessions\n- âœ… Email verification (optionnel mais recommandÃ©)\n- âœ… Token refresh (optionnel mais recommandÃ©)\n\n## ğŸ“ Exemple d'intÃ©gration Backend Node.js/Express\n\n### Installation\n```bash\ncd 4c-lab-manager-api\nnpm install express bcryptjs jsonwebtoken cors dotenv\n```\n\n### Structure minimale (auth.controller.js)\n```javascript\nconst express = require('express');\nconst bcrypt = require('bcryptjs');\nconst jwt = require('jsonwebtoken');\nconst router = express.Router();\n\nconst users = []; // Ã€ remplacer par une vraie DB\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\n\nrouter.post('/login', async (req, res) => {\n  const { email, password, role } = req.body;\n  \n  // Valider les donnÃ©es\n  if (!email || !password || !role) {\n    return res.status(400).json({ message: 'Email, password et role requis' });\n  }\n  \n  // Chercher l'utilisateur (Ã  adapter Ã  votre DB)\n  const user = users.find(u => u.email === email && u.role === role);\n  \n  if (!user) {\n    return res.status(401).json({ message: 'Email ou mot de passe invalide' });\n  }\n  \n  // VÃ©rifier le mot de passe\n  const isValid = await bcrypt.compare(password, user.password);\n  if (!isValid) {\n    return res.status(401).json({ message: 'Email ou mot de passe invalide' });\n  }\n  \n  // GÃ©nÃ©rer JWT\n  const token = jwt.sign(\n    { id: user.id, email: user.email, role: user.role },\n    JWT_SECRET,\n    { expiresIn: '24h' }\n  );\n  \n  res.json({\n    token,\n    user: {\n      id: user.id,\n      email: user.email,\n      role: user.role,\n      name: user.name\n    },\n    message: 'Connexion rÃ©ussie'\n  });\n});\n\nrouter.post('/register', async (req, res) => {\n  const { email, password, name, role } = req.body;\n  \n  // Valider les donnÃ©es\n  if (!email || !password || !name || !role) {\n    return res.status(400).json({ message: 'Tous les champs sont requis' });\n  }\n  \n  // VÃ©rifier si l'utilisateur existe\n  if (users.find(u => u.email === email && u.role === role)) {\n    return res.status(400).json({ message: 'Utilisateur dÃ©jÃ  existant' });\n  }\n  \n  // Hasher le mot de passe\n  const hashedPassword = await bcrypt.hash(password, 10);\n  \n  // CrÃ©er l'utilisateur\n  const user = {\n    id: Date.now().toString(),\n    email,\n    password: hashedPassword,\n    name,\n    role\n  };\n  \n  users.push(user);\n  \n  // GÃ©nÃ©rer JWT\n  const token = jwt.sign(\n    { id: user.id, email: user.email, role: user.role },\n    JWT_SECRET,\n    { expiresIn: '24h' }\n  );\n  \n  res.status(201).json({\n    token,\n    user: {\n      id: user.id,\n      email: user.email,\n      role: user.role,\n      name: user.name\n    },\n    message: 'Inscription rÃ©ussie'\n  });\n});\n\nmodule.exports = router;\n```\n\n## ğŸ§ª Tester l'authentification\n\n### Avec cURL\n```bash\n# Login\ncurl -X POST http://localhost:3000/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"email\": \"admin@example.com\",\n    \"password\": \"Password123\",\n    \"role\": \"admin\"\n  }'\n\n# Register\ncurl -X POST http://localhost:3000/api/auth/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"email\": \"newuser@example.com\",\n    \"password\": \"Password123\",\n    \"name\": \"New User\",\n    \"role\": \"apprenant\"\n  }'\n```\n\n### Avec Postman\n1. CrÃ©er une nouvelle collection \"4C Lab Manager\"\n2. CrÃ©er une requÃªte POST: `http://localhost:3000/api/auth/login`\n3. Ajouter les headers: `Content-Type: application/json`\n4. Body (raw JSON):\n```json\n{\n  \"email\": \"admin@example.com\",\n  \"password\": \"Password123\",\n  \"role\": \"admin\"\n}\n```\n\n## ğŸš€ DÃ©marrer l'application\n\n```bash\n# Terminal 1 - Frontend\ncd 4c-lab-manager\nnpm start\n# Accessible sur http://localhost:4200\n\n# Terminal 2 - Backend (Ã  implÃ©menter)\ncd 4c-lab-manager-api\nnpm start\n# Accessible sur http://localhost:3000\n```\n\n## ğŸ”— Architecture de fichiers crÃ©Ã©s\n\n```\nsrc/\nâ”œâ”€â”€ app/\nâ”‚   â”œâ”€â”€ app.ts                    (Composant racine)\nâ”‚   â”œâ”€â”€ app.routes.ts             (Configuration des routes)\nâ”‚   â”œâ”€â”€ app.config.ts             (Configuration Angular)\nâ”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â””â”€â”€ login/\nâ”‚   â”‚       â”œâ”€â”€ login.ts          (Logique du composant)\nâ”‚   â”‚       â”œâ”€â”€ login.html        (Template)\nâ”‚   â”‚       â””â”€â”€ login.scss        (Styles)\nâ”‚   â”œâ”€â”€ services/\nâ”‚   â”‚   â”œâ”€â”€ auth.ts              (Service d'authentification)\nâ”‚   â”‚   â””â”€â”€ auth.spec.ts\nâ”‚   â”œâ”€â”€ guards/\nâ”‚   â”‚   â”œâ”€â”€ auth-guard.ts        (Protection des routes)\nâ”‚   â”‚   â””â”€â”€ auth-guard.spec.ts\nâ”‚   â””â”€â”€ interceptors/\nâ”‚       â”œâ”€â”€ auth-interceptor.ts  (Ajout des tokens JWT)\nâ”‚       â””â”€â”€ auth-interceptor.spec.ts\nâ”œâ”€â”€ index.html\nâ”œâ”€â”€ main.ts\nâ””â”€â”€ styles.scss                   (Styles globaux)\n\nâ”œâ”€â”€ AUTHENTICATION.md             (Documentation dÃ©taillÃ©e)\n```\n\n## ğŸ’¡ Tips & Tricks\n\n### DÃ©boguer l'authentification\n```typescript\n// Dans la console du navigateur\nconst token = localStorage.getItem('4c-lab-token');\nconst user = JSON.parse(localStorage.getItem('4c-lab-user'));\nconsole.log({ token, user });\n```\n\n### Tester les rÃ´les\n```typescript\n// Dans un composant\nimport { AuthService } from '@app/services/auth';\n\nconstructor(private auth: AuthService) {}\n\nngOnInit() {\n  console.log(this.auth.hasRole('admin')); // true/false\n  console.log(this.auth.hasAnyRole(['admin', 'superadmin'])); // true/false\n}\n```\n\n### VÃ©rifier les erreurs d'interception\n- Ouvrir DevTools (F12)\n- Aller Ã  Network tab\n- Chercher les requÃªtes Ã  `/api/auth/*`\n- VÃ©rifier les status codes et rÃ©ponses\n\n## â­ FonctionnalitÃ©s futures recommandÃ©es\n\n- [ ] Two-Factor Authentication (2FA)\n- [ ] OAuth 2.0 (Google, GitHub)\n- [ ] Email verification\n- [ ] Password strength indicator\n- [ ] Account lockout aprÃ¨s X tentatives Ã©chouÃ©es\n- [ ] Audit logging\n- [ ] Refresh tokens\n- [ ] Session management\n- [ ] Dark mode\n- [ ] i18n (Internationalization)\n\n## ğŸ“ Support Developpement\n\nSi vous avez besoin d'aide:\n1. VÃ©rifier la documentation [AUTHENTICATION.md](./AUTHENTICATION.md)\n2. VÃ©rifier les erreurs console (F12)\n3. VÃ©rifier les rÃ©sponses API (Network tab)\n4. VÃ©rifier les tokens stockÃ©s dans localStorage/sessionStorage\n\n---\n\n**DerniÃ¨re mise Ã  jour:** 7 FÃ©vrier 2026\n"